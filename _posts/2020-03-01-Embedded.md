---
layout: post
title: "임베디드"
subtitle: "안드로이드.."
categories : [IoT]
date: 2020-3-01 23:00:00 -0900
background: '/img/posts/06.jpg'
---


# 목표
 안드로이드 내의 임베디드 시스템을 이해하고, 
직접 커스텀롬을 만들어 볼 것..


# 임베디드 시스템의 소프트웨어 계층
## 가장 간단한 임베디드 시스템 구조
- 애플리케이션
- 하드웨어

 이와 같은 구조는 단 하나의 소프트웨어 계층만 존재하며, 그 소프트웨어가 직접 하드웨어를 제어한다. 이러한 구조에서 해당 소프트웨어는 하드웨어를 초기화한 후 특정 기능을 무한루프하는 형식이다.
 대표적으로 온도계와 같은 애플리케이션은 센서를 초기화하고 온도를 반복적으로 체크하는 무한루프를 수행한다.


 ## 복잡한 임베디드 시스템
 - 애플리케이션s
- 운영체제
- 펌웨어(부트로더 또는 바이오스)
- 하드웨어

 위는 일반적인 컴퓨터에서 사용하는 계층구조로, 임베디드 시스템에서도 위와같이 사용할 수 있다. 
 여기서 부트로더(펌웨어)는 하드웨어를 초기화하고, 운영체제를 로딩한다. 그리고 운영체제가 준비된 후, 그 위에서 여러가지 애플리케이션들이 동작한다. 이와같은 구조를 갖는 것이 스마트폰 등이다.

  일반적으로 부트로더는 시스템이 올라온 후 사라진다. 왜냐하면 부팅에 관한 것은 시스템이 정상적으로 올라온 후에는 필요가 없기 때문이다.  

  그러나 특별한 경우에는 펌웨어가 메모리에 머물면서 실행된 후에도 런타임 서비스를 제공하기도 한다. 예를들면 `UEFI`-based BIOS는 UEFI 런타임 서비스를 제공한다. 이 서비스들은 운영체제 레벨이 아닌 BIOS에 의해 제공되는 서비스들인 것이다.

  ### UEFI? 
   Unified extensible Firmware Interface의 약자이다. UEFI는 BIOS를 대체하는 펌웨어 규격으로 더 유연한 하드웨어 지원을 위해서 개발되었다. 기존 BIOS와 달리 GUI, GPT, FastBoot, SecureBoot 등의 기능을 제공할 수 있다.



## ARM 프로세서의 시리즈
- CORTEX-A : 개방향 운영 시스템을 위한 고성능 프로세서
- CORTEX-R : 실시간 애플리케이션을 위한 프로세서
- CORTEX-M : 마이크로컨트롤러 애플리케이션을 위한 저비용 프로세서
- SecurCore : 높은 수준의 보안 애플리케이션 프로세서
- FPGA Cores : FPGA를 위한 프로세서

 CORTEX-R은 `실시간 운영체제(RTOS)`에 적합하며, CORTEX-A는 완전한 운영체제를 지원할 수 있다. 참고로 안드로이드 에뮬레이터는 ARM926EJ-S이다.

 ### RTOS와 일반 OS의 주요 차이
>RTOS는 시스템이 올라오기전에 태스크 개수와 메모리 사용량이 미리 결정 된다. 그래서 간단하게 스케쥴러를 만들 수 있다.


## 기본적인 하드웨어 주변 인터페이스
![기초 시스템 아키텍처 ](https://github.com/leeseho/leeseho.github.io/blob/master/_posts/images/2020-03-02-00-32-27.png?raw=true)

 이 구조에서 후반으로 갈수록 더 복잡한  아키텍처를 구현해본다.


 

